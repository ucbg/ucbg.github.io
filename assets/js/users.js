const COUNTRIES=[{code:"US",name:"United States",flag:"ğŸ‡ºğŸ‡¸",weight:.28},{code:"BR",name:"Brazil",flag:"ğŸ‡§ğŸ‡·",weight:.12},{code:"IN",name:"India",flag:"ğŸ‡®ğŸ‡³",weight:.1},{code:"GB",name:"United Kingdom",flag:"ğŸ‡¬ğŸ‡§",weight:.08},{code:"DE",name:"Germany",flag:"ğŸ‡©ğŸ‡ª",weight:.06},{code:"FR",name:"France",flag:"ğŸ‡«ğŸ‡·",weight:.05},{code:"CA",name:"Canada",flag:"ğŸ‡¨ğŸ‡¦",weight:.05},{code:"MX",name:"Mexico",flag:"ğŸ‡²ğŸ‡½",weight:.04},{code:"ES",name:"Spain",flag:"ğŸ‡ªğŸ‡¸",weight:.04},{code:"IT",name:"Italy",flag:"ğŸ‡®ğŸ‡¹",weight:.03},{code:"PL",name:"Poland",flag:"ğŸ‡µğŸ‡±",weight:.03},{code:"TR",name:"Turkey",flag:"ğŸ‡¹ğŸ‡·",weight:.03},{code:"AU",name:"Australia",flag:"ğŸ‡¦ğŸ‡º",weight:.02},{code:"NL",name:"Netherlands",flag:"ğŸ‡³ğŸ‡±",weight:.02},{code:"AR",name:"Argentina",flag:"ğŸ‡¦ğŸ‡·",weight:.02},{code:"OTHER",name:"Other Countries",flag:"ğŸŒ",weight:.03}];let countryUsers={};function createOnlineUsersDropdown(){let e=document.getElementById("online-users-dropdown");if(e)return e;e=document.createElement("div"),e.id="online-users-dropdown",e.className="online-users-dropdown",e.style.display="none";const n=document.createElement("div");n.className="online-users-dropdown-header",n.innerHTML='\n    <div class="online-users-dropdown-title">ğŸ® Online Players</div>\n    <div class="online-users-dropdown-subtitle">Pretending to learn, but actually leveling up.</div>\n    <div class="online-users-stats">\n      <div class="stat-item">\n        <span class="stat-value">2,847</span>\n        <span class="stat-label">Active Sites</span>\n      </div>\n      <div class="stat-item">\n        <span class="stat-value">1.2M+</span>\n        <span class="stat-label">Daily Players</span>\n      </div>\n      <div class="stat-item">\n        <span class="stat-value">156</span>\n        <span class="stat-label">Countries</span>\n      </div>\n    </div>\n  ';const t=document.createElement("div");return t.id="online-users-list",t.className="online-users-list",e.appendChild(n),e.appendChild(t),document.body.appendChild(e),e}function updateOnlineUsersDropdown(){const e=document.getElementById("online-users-list"),n=document.getElementById("online-users-dropdown");e&&n&&"none"!==n.style.display&&(e.innerHTML=COUNTRIES.map(e=>`\n    <div class="online-users-country-item">\n      <span class="country-flag">${e.flag}</span>\n      <span class="country-name">${e.name}</span>\n      <span class="country-count">${(countryUsers[e.code]||0).toLocaleString()}</span>\n    </div>\n  `).join(""))}function toggleOnlineUsersDropdown(e){e&&e.stopPropagation();const n=createOnlineUsersDropdown(),t=document.querySelector(".online-users");if(!t||!n)return;if("block"===n.style.display)n.style.display="none";else{"function"==typeof window.closeAllDrawers&&window.closeAllDrawers();const e=t.getBoundingClientRect();n.style.top=e.bottom+10+"px",n.style.right=window.innerWidth-e.right+"px",n.style.display="block",updateOnlineUsersDropdown()}}document.addEventListener("DOMContentLoaded",async()=>{const e=document.getElementById("online-users");"function"==typeof ppe?await ppe():"function"==typeof poki?await poki():await crayzgames();const n=["America/New_York","America/Chicago","America/Denver","America/Los_Angeles"].map(e=>new Intl.DateTimeFormat("en-US",{timeZone:e,hour:"numeric",hour12:!1}));function dayWeight(e){return e<6?.25:e<9?.55:e<12?.8:e<18?1:e<22?.7:.35}function getUSDayFactor(e){const t=function getUSHours(e){return n.map(n=>parseInt(n.format(e),10))}(e),a=t.map(dayWeight);return a.reduce((e,n)=>e+n,0)/a.length}const t={low:85e3,high:115e3},a={low:15e3,high:25e3};let s=null,o=null;function step(){const n=new Date,o=function isWeekendLocal(e){const n=e.getDay();return 0===n||6===n}(n),i=o?a:t,l=getUSDayFactor(n),r=Math.round(i.low+l*(i.high-i.low));null===s&&(s=r);const c=r-s,d=.12*c,u=Math.max(15,Math.min(300,.02*Math.abs(c))),p=(2*Math.random()-1)*u;s=Math.max(0,s+d+p);const m=Math.round(s);COUNTRIES.forEach(e=>{const n=Math.round(m*e.weight);countryUsers[e.code]||(countryUsers[e.code]=n);const t=countryUsers[e.code],a=n-t;if(Math.abs(a)>0){const s=Math.min(5,Math.abs(a)),o=Math.floor(Math.random()*s)+1;countryUsers[e.code]=a>0?Math.min(n,t+o):Math.max(n,t-o)}countryUsers[e.code]=Math.max(0,countryUsers[e.code])}),e.textContent=m.toLocaleString(),updateOnlineUsersDropdown()}function start(){stop(),step(),o=setInterval(step,1500)}function stop(){o&&(clearInterval(o),o=null)}document.addEventListener("visibilitychange",()=>{"visible"===document.visibilityState?start():stop()}),start()}),document.addEventListener("click",e=>{const n=document.getElementById("online-users-dropdown"),t=document.querySelector(".online-users");!n||"block"!==n.style.display||n.contains(e.target)||t.contains(e.target)||(n.style.display="none")}),window.toggleOnlineUsersDropdown=toggleOnlineUsersDropdown;