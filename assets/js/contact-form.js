document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("contactForm"),t=document.getElementById("contactSubmitButton"),n=document.getElementById("contactSubmitButtonText"),o=document.getElementById("contactSubmitButtonSpinner"),s=document.getElementById("contactResponseMessage"),a=document.getElementById("message"),r=document.getElementById("messageCount");function showMessage(e,t){s.textContent=e,s.style.display="block","success"===t?(s.style.backgroundColor="rgba(28, 189, 100, 0.1)",s.style.border="1px solid rgba(28, 189, 100, 0.3)",s.style.color="var(--bs-success)"):(s.style.backgroundColor="rgba(223, 50, 92, 0.1)",s.style.border="1px solid rgba(223, 50, 92, 0.3)",s.style.color="var(--bs-danger)"),s.scrollIntoView({behavior:"smooth",block:"nearest"})}a.addEventListener("input",function(){r.textContent=this.value.length}),e.addEventListener("submit",function(a){if(a.preventDefault(),!e.checkValidity())return void e.reportValidity();const c={name:document.getElementById("contactName").value.trim(),email:document.getElementById("contactEmail").value.trim(),requestType:document.getElementById("requestType").value,message:document.getElementById("message").value.trim(),timestamp:(new Date).toISOString()};t.disabled=!0,n.style.display="none",o.style.display="inline-block",s.style.display="none";fetch("https://user.ucbg.online/contact-api/contact.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)}).then(e=>{if(!e.ok)throw new Error("Network response was not ok");return e.json()}).then(t=>{showMessage(t.message||"Thank you for contacting us! We have received your message and will get back to you soon.","success"),e.reset(),r.textContent="0"}).catch(e=>{console.error("Error:",e),showMessage("An error occurred while sending your message. Please try again later or contact us directly at cricoverteam@gmail.com","error")}).finally(()=>{t.disabled=!1,n.style.display="inline-block",o.style.display="none"})})});