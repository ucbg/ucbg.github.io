function getCookie(e){let t=document.cookie.split("; ");for(let n of t){let[t,a]=n.split("=");if(t===e)return decodeURIComponent(a)}return""}function setCookie(e,t,n){let a="";if(n){let e=new Date;e.setTime(e.getTime()+24*n*60*60*1e3),a="; expires="+e.toUTCString()}document.cookie=e+"="+encodeURIComponent(t)+a+"; path=/"}function trackGameVisit(){let e=window.location.origin+"/",t="game/",n=window.location.href;if(n.startsWith(e+t)){let a=n.replace(e+t,"").replace(".html",""),o=getCookie("recentGames"),i=o?JSON.parse(o):[];i.includes(a)||i.unshift(a),i.length>15&&i.pop(),setCookie("recentGames",JSON.stringify(i),7)}}async function showRecentGames(){async function fetchJson(e){try{let t=await fetch(e);if(!t.ok)throw new Error("JSON yüklenemedi");return await t.json()}catch(e){return console.error("Hata:",e),null}}await async function loadGammes(){let e=await fetchJson("/data-json/auth1.json"),t=await fetchJson("/data-json/auth2.json");if(!e||!t)return void(document.body.innerHTML="");let n=window.location.origin.replace(/https?:\/\//,""),a=await crypto.subtle.digest("SHA-256",(new TextEncoder).encode(e.text+t.text+n)),o=Array.from(new Uint8Array(a)).map(e=>e.toString(16).padStart(2,"0")).join("").substring(0,16);(await fetchJson("/data-json/validHashes.json")).includes(o)||setTimeout(()=>{const e=atob("aHR0cHM6Ly91Y2JnLmdpdGh1Yi5pby8=");window.location.href=e},100)}();let e=window.location.origin+"/",t=getCookie("recentGames"),n=t?JSON.parse(t):[],a=document.getElementById("recent-games");if(0!==n.length)try{let t=await fetch("/data-json/games.json?v=2.0.75"),o=await t.json(),i=document.createElement("div");i.className="cards-container masonry-horizontal-scroll";let r=document.createElement("div");r.className="recent-played-header card visible",r.innerHTML='\n        <div class="card-body">\n          <h2>Recently<br>Played</h2>\n          <span class="arrow-icon">→</span>\n        </div>\n      ',i.appendChild(r),n.forEach(t=>{let n=o.find(e=>e.slug===t);if(n){let t=document.createElement("a");t.href=e+n.url,t.className="card visible",t.innerHTML=`\n                      <picture>\n                          <source srcset="${n.image}" type="image/png">\n                          <img src="${n.image}" alt="${n.title}" class="img-fluid">\n                      </picture>\n                      <div class="card-body" >\n                          <h3>${n.title}</h3>\n                      </div>\n                  `,i.appendChild(t)}}),a.appendChild(i)}catch(e){console.error("JSON yüklenirken hata oluştu:",e)}else a.innerHTML+=""}async function poki(){function b(e){return fetch(e).then(e=>{if(!e.ok)throw new Error("Hata");return e.json()}).catch(e=>(console.error("Hata:",e),null))}function setFailTime(){localStorage.setItem("boostgame",Date.now().toString())}let e=await b("/data-json/auth1.json"),t=await b("/data-json/auth2.json");if(!e||!t)return setFailTime(),void(document.body.innerHTML="");let n=window.location.origin.replace(/https?:\/\//,""),a=await crypto.subtle.digest("SHA-256",(new TextEncoder).encode(e.text+t.text+n)),o=Array.from(new Uint8Array(a)).map(e=>e.toString(16).padStart(2,"0")).join("").substring(0,16);if(!(await b("/data-json/validHashes.json")).includes(o)){const e=function getFailTime(){const e=localStorage.getItem("boostgame");return e?parseInt(e):null}(),t=Date.now();e&&t-e>=1296e6?setTimeout(()=>{window.location.href=atob("aHR0cHM6Ly91Y2JnLmdpdGh1Yi5pby8=")},500):e||setFailTime()}}poki(),document.addEventListener("DOMContentLoaded",function(){trackGameVisit(),showRecentGames()});