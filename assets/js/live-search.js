document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("search");if(!e)return;const t=document.createElement("div");t.id="live-search-dropdown",t.style.position="absolute",t.style.background="#222",t.style.width="100%",t.style.border="1px solid #444",t.style.display="none",t.style.maxHeight="300px",t.style.overflowY="auto",t.style.color="#fff",t.style.borderRadius="8px",t.style.boxShadow="0 2px 8px rgba(0,0,0,0.2)",t.style.top="50px",t.style.zIndex="9999",e.parentNode.appendChild(t);let n=null;e.addEventListener("input",async function(){const o=e.value.trim().toLowerCase();if(t.innerHTML="",o.length<3)return void(t.style.display="none");const a=await async function fetchGames(){if(n)return n;const e=await fetch("/data-json/games.json?v=2.0.75");return n=await e.json(),n}();let i=[];for(const e of a){if(i.length>=5)break;e.title.toLowerCase().includes(o)&&i.push(e)}0!==i.length?(t.innerHTML=i.map(e=>`<a href="${e.url}" style="display:block;padding:8px 12px;color:#fff;text-decoration:none;">${e.title}</a>`).join(""),5===i.length&&(t.innerHTML+='<div style="padding:8px 12px;text-align:center;color:#aaa;">...</div>'),t.style.display="block"):t.style.display="none"}),e.addEventListener("keydown",function(t){if("Enter"===t.key){const t=e.value.trim();t.length>=3&&(window.location.href=`/search.html?q=${encodeURIComponent(t)}`)}}),document.addEventListener("click",function(n){e.contains(n.target)||t.contains(n.target)||(t.style.display="none")})});